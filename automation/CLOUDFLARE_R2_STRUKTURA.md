# ‚òÅÔ∏è Cloudflare R2 - ≈†trukt√∫ra prieƒçinkov

> **Bucket:** `katarina-dzurikova-web-sk` (existuj√∫ci)  
> **Public URL:** `https://pub-ca9ca721368949e4a4793e9cf426e44e.r2.dev`

---

## ≈†trukt√∫ra prieƒçinkov

```
katarina-dzurikova-web-sk/
‚îÇ
‚îú‚îÄ‚îÄ üìÅ projekty/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ shine-studio-krasy/          # Prv√Ω projekt (referenƒçn√Ω)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ images/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portrait.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interior-1.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interior-2.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ work-1.jpeg
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ video/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hero-video.mp4
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ logo/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logo.svg
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ certificates/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ cert-1.jpeg
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ [novy-projekt-slug]/         # ≈†abl√≥na pre nov√© projekty
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ images/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portrait.jpeg           # Povinn√©
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ interior-*.jpeg         # Voliteƒæn√©
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ work-*.jpeg             # Voliteƒæn√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ video/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hero.mp4                # Voliteƒæn√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ logo/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logo.*                  # SVG/PNG
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ certificates/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ *.jpeg                  # Voliteƒæn√©
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ [dalsi-projekt]/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ üìÅ shared/                          # Zdieƒæan√© assety
    ‚îú‚îÄ‚îÄ üìÅ placeholders/
    ‚îÇ   ‚îú‚îÄ‚îÄ portrait-placeholder.jpeg
    ‚îÇ   ‚îú‚îÄ‚îÄ interior-placeholder.jpeg
    ‚îÇ   ‚îî‚îÄ‚îÄ work-placeholder.jpeg
    ‚îî‚îÄ‚îÄ üìÅ templates/
        ‚îî‚îÄ‚îÄ video-intro-template.mp4
```

---

## Pomenovanie s√∫borov

### Pravidl√° pre slug projektu:
- Mal√© p√≠smen√°
- Bez diakritiky
- Pomlƒçky namiesto medzier
- Max 30 znakov

**Pr√≠klady:**
| N√°zov sal√≥nu | Slug |
|--------------|------|
| SHINE ≈†t√∫dio Kr√°sy | `shine-studio-krasy` |
| Beauty Salon Lucia | `beauty-salon-lucia` |
| Sal√≥n Glamour Bratislava | `salon-glamour-ba` |

### Pravidl√° pre s√∫bory:
| Typ | Form√°t n√°zvu | Pr√≠klad |
|-----|--------------|---------|
| Portr√©t | `portrait.jpeg` | `portrait.jpeg` |
| Interi√©r | `interior-[N].jpeg` | `interior-1.jpeg` |
| Pr√°ca | `work-[N].jpeg` | `work-1.jpeg` |
| Video | `hero.mp4` | `hero.mp4` |
| Logo | `logo.[ext]` | `logo.svg` |
| Certifik√°t | `cert-[N].jpeg` | `cert-1.jpeg` |

---

## URL ≈°trukt√∫ra

### Base URL:
```
https://pub-ca9ca721368949e4a4793e9cf426e44e.r2.dev
```

### Pr√≠klady URL:
```
# Portr√©t
https://pub-ca9ca721368949e4a4793e9cf426e44e.r2.dev/projekty/shine-studio-krasy/images/portrait.jpeg

# Video
https://pub-ca9ca721368949e4a4793e9cf426e44e.r2.dev/projekty/shine-studio-krasy/video/hero.mp4

# Logo
https://pub-ca9ca721368949e4a4793e9cf426e44e.r2.dev/projekty/shine-studio-krasy/logo/logo.svg
```

---

## Automatick√© spracovanie s√∫borov

### Workflow v n8n/Make:

```
1. Prija≈• s√∫bory z Tally webhook
              ‚Üì
2. Vytvori≈• slug z n√°zvu sal√≥nu
              ‚Üì
3. Vytvori≈• prieƒçinkov√∫ ≈°trukt√∫ru v R2
              ‚Üì
4. Premenova≈• s√∫bory podƒæa konvencie
              ‚Üì
5. Nahra≈• do R2 s spr√°vnymi MIME types
              ‚Üì
6. Vr√°ti≈• zoznam URL
```

### K√≥d pre vytvorenie slug (JavaScript):
```javascript
function createSlug(name) {
  return name
    .toLowerCase()
    .normalize('NFD')
    .replace(/[\u0300-\u036f]/g, '') // odstr√°ni diakritiku
    .replace(/[^a-z0-9\s-]/g, '')    // len alfanumerick√©
    .replace(/\s+/g, '-')            // medzery na pomlƒçky
    .replace(/-+/g, '-')             // viacn√°sobn√© pomlƒçky
    .substring(0, 30)                 // max 30 znakov
    .replace(/^-|-$/g, '');          // odstr√°ni okrajov√© pomlƒçky
}

// Pr√≠klad:
createSlug("SHINE ≈†t√∫dio Kr√°sy") // ‚Üí "shine-studio-krasy"
createSlug("Sal√≥n Glamour BA")   // ‚Üí "salon-glamour-ba"
```

---

## Nastavenie CORS v Cloudflare R2

V Cloudflare Dashboard ‚Üí R2 ‚Üí Bucket ‚Üí Settings ‚Üí CORS:

```json
[
  {
    "AllowedOrigins": ["*"],
    "AllowedMethods": ["GET", "HEAD"],
    "AllowedHeaders": ["*"],
    "MaxAgeSeconds": 86400
  }
]
```

---

## Optimaliz√°cia obr√°zkov pred uploadom

### Odpor√∫ƒçan√© rozmery:
| Typ | Rozmer | Max veƒækos≈• |
|-----|--------|-------------|
| Portr√©t | 1200x1600 | 500KB |
| Interi√©r | 1920x1280 | 400KB |
| Pr√°ca | 1200x1200 | 300KB |
| Logo | 500x500 | 100KB |
| Video | 1920x1080 | 5MB |

### Automatick√° kompresia (v n8n):
- Pou≈æi≈• Sharp alebo ImageMagick
- Quality: 80%
- Format: JPEG (WebP pre modern√©)

---

## Pr√≠stupov√© pr√°va

### R2 API Token:
- Typ: `Admin Read & Write`
- Bucket: `katarina-dzurikova-web-sk`
- Ulo≈æi≈• v: n8n credentials / .env

### Potrebn√© opr√°vnenia:
- `Workers R2 Storage:Edit`
- `Workers R2 Storage:Read`

---

## Monitoring

### Cloudflare Dashboard:
- R2 ‚Üí Analytics ‚Üí Request count
- Bandwidth usage
- Storage usage

### Alarmy:
- Nastavi≈• ak storage > 1GB
- Nastavi≈• ak bandwidth > 10GB/mesiac

---

*Vytvoren√©: December 2025*

